@using PoC1_LegacyAnalyzer_Web.Models
@using PoC1_LegacyAnalyzer_Web.Helpers

<div class="card shadow mb-4">
    <div class="card-header bg-primary text-white">
        <div class="d-flex justify-content-between align-items-center">
            <div>
                <h5 class="mb-0">
                    <i class="bi bi-clipboard-check"></i> Executive Assessment Summary
                </h5>
                <small>Strategic overview for decision makers</small>
            </div>
            <div class="badge bg-warning text-dark fs-6">
                Risk Level: @Result.OverallRiskLevel
            </div>
        </div>
    </div>
    <div class="card-body">
        <div class="row">
            <div class="col-md-8">
                <h6 class="text-primary mb-3">
                    <i class="bi bi-graph-up"></i> Project Assessment
                </h6>
                <p class="mb-3">
                    Analysis of <strong>@Result.TotalFiles files</strong> containing
                    <strong>@Result.TotalClasses classes</strong> and
                    <strong>@Result.TotalMethods methods</strong>.
                    Overall risk level:
                    <span class="badge bg-@(MultiFileHelpers.GetRiskBadgeClass(Result))">
                        @Result.OverallRiskLevel
                    </span>
                </p>

                <h6 class="text-success mb-3">
                    <i class="bi bi-target"></i> Strategic Recommendations
                </h6>

                @if (Result.KeyRecommendations.Any())
                {
                    <ul class="list-unstyled">
                        @foreach (var recommendation in Result.KeyRecommendations.Take(3))
                        {
                            <li class="mb-2">
                                <i class="bi bi-arrow-right text-success"></i>
                                <strong>@recommendation</strong>
                            </li>
                        }
                    </ul>
                }
                else
                {
                    <div class="alert alert-success">
                        <strong>Recommended Approach:</strong>
                        Standard development practices suitable for this project complexity level.
                    </div>
                }
            </div>

            <div class="col-md-4">
                <div class="card bg-primary text-white">
                    <div class="card-body text-center">
                        <h6 class="card-title">Complexity Assessment</h6>

                        <div class="display-6 mb-2">
                            @Result.OverallComplexityScore<small>/100</small>
                        </div>
                        <small>Technical Complexity Score</small>

                        <hr class="bg-light">

                        <div class="mt-3">
                            <strong>@MultiFileHelpers.GetExecutiveTimeline(Result.OverallComplexityScore, ComplexityLowThreshold, ComplexityMediumThreshold, ComplexityHighThreshold)</strong>
                            <br>
                            <small>Estimated Timeline</small>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

@code {
    [Parameter, EditorRequired]
    public MultiFileAnalysisResult Result { get; set; } = null!;

    [Parameter]
    public int ComplexityLowThreshold { get; set; } = 30;

    [Parameter]
    public int ComplexityMediumThreshold { get; set; } = 50;

    [Parameter]
    public int ComplexityHighThreshold { get; set; } = 70;
}
