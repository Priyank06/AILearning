{
  "Logging": {
    "LogLevel": {
      "Default": "Information",
      "Microsoft.AspNetCore": "Warning"
    }
  },
  "ApplicationInsights": {
    "ConnectionString": "InstrumentationKey=1dc96e5f-fb00-4d8c-98de-f016a4506137;IngestionEndpoint=https://canadacentral-1.in.applicationinsights.azure.com/;LiveEndpoint=https://canadacentral.livediagnostics.monitor.azure.com/;ApplicationId=fe9120bd-afc5-40e4-99e8-abf05b9703f1",
    "InstrumentationKey": "1dc96e5f-fb00-4d8c-98de-f016a4506137",
    "EnableAdaptiveSampling": true,
    "EnablePerformanceCounterCollectionModule": true,
    "EnableAppServicesHeartbeatTelemetryModule": true,
    "EnableAzureInstanceMetadataTelemetryModule": true,
    "EnableEventCounterCollectionModule": true,
    "EnableDependencyTrackingTelemetryModule": true,
    "EnableRequestTrackingTelemetryModule": true
  },
  "AllowedHosts": "*",
  "KeyVault": {
    "Enabled": true,
    "VaultUri": "https://kv-ailearning-dev-001.vault.azure.net/",
    "ManagedIdentityClientId": "",    
    "SecretPrefix": "App--",
    "ReloadIntervalSeconds": 0,
    "Client": {
      "MaxRetries": 5,
      "RetryDelaySeconds": 2
    }
  },
  "AzureOpenAI": {
    "Endpoint": "",
    "ApiKey": "",
    "Deployment": "gpt-35-turbo",
    "MaxTokens": 4000,
    "Temperature": 0.3,
    "RequestTimeoutSeconds": 120,
    "BatchProcessing": {
      "Enabled": true,
      "MaxFilesPerBatch": 5,
      "MaxTokensPerBatch": 12000,
      "MaxConcurrentBatches": 3,
      "TokenEstimationCharsPerToken": 4,
      "ReserveTokensForResponse": 3000
    }
  },
  "RetryPolicy": {
    "MaxRetryAttempts": 3,
    "InitialDelaySeconds": 2,
    "MaxDelaySeconds": 30,
    "CircuitBreakerFailureThreshold": 5,
    "CircuitBreakerDurationSeconds": 30,
    "CircuitBreakerSuccessThreshold": 2,
    "RetryableStatusCodes": [ 429, 500, 502, 503, 504 ],
    "NonRetryableStatusCodes": [ 400, 401, 403, 404 ]
  },
  "PromptConfiguration": {
    "CodePreviewMaxLength": 1200,
    "MaxTokensForQuickInsight": 60,
    "TemperatureForQuickInsight": 0.2,
    "SystemPrompts": {
      "security": "You are a senior security architect providing actionable security assessment and recommendations for code across multiple programming languages.",
      "performance": "You are a performance engineering specialist identifying specific optimization opportunities and bottlenecks in code across multiple programming languages.",
      "migration": "You are a migration architect assessing code modernization requirements and providing strategic guidance for multiple programming languages.",
      "general": "You are a senior software architect providing comprehensive code modernization and quality assessment across multiple programming languages."
    },
    "AnalysisPromptTemplates": {
      "BaseTemplate": "Perform a {analysisType} analysis on the provided source code. The code contains {classCount} classes/types, {methodCount} methods/functions, and {propertyCount} properties/attributes. Principal classes/types: {principalClasses}. Code preview: {codePreview}.",
      "security": {
        "Sections": [
          "1. Identify potential security vulnerabilities in the code.",
          "2. Recommend best practices for secure coding.",
          "3. Assess authentication and authorization mechanisms.",
          "4. Suggest improvements for data protection and privacy."
        ]
      },
      "performance": {
        "Sections": [
          "1. Detect performance bottlenecks in the code.",
          "2. Recommend optimization strategies for resource usage.",
          "3. Assess scalability and concurrency aspects.",
          "4. Suggest improvements for memory and CPU efficiency."
        ]
      },
      "migration": {
        "Sections": [
          "1. Identify legacy patterns and outdated dependencies.",
          "2. Recommend modernization strategies for the codebase.",
          "3. Assess compatibility with .NET 8 and Blazor.",
          "4. Suggest steps for a smooth migration process."
        ]
      },
      "general": {
        "Sections": [
          "1. Assess overall code quality and maintainability.",
          "2. Recommend refactoring opportunities.",
          "3. Evaluate adherence to language-specific and general best practices.",
          "4. Suggest improvements for documentation and readability."
        ]
      }
    },
    "ErrorMessages": {
      "rateLimitExceeded": "Request rate limit exceeded. Please try again later.",
      "authenticationFailed": "Authentication failed. Please check your credentials.",
      "generalFailure": "An unexpected error occurred. Please contact support.",
      "noResponse": "No response received from the analysis service."
    }
  },
  "AgentConfiguration": {
    "AgentProfiles": {
      "security": {
        "AgentName": "SecurityAnalyst-Alpha",
        "Specialty": "Application Security Specialist",
        "AgentPersona": "A vigilant security expert focused on identifying vulnerabilities, enforcing secure coding practices, and ensuring compliance with industry standards.",
        "ConfidenceThreshold": 80
      },
      "performance": {
        "AgentName": "PerformanceGuru-Beta",
        "Specialty": "Performance Optimization Specialist",
        "AgentPersona": "An analytical engineer dedicated to uncovering bottlenecks, optimizing resource usage, and enhancing scalability and efficiency.",
        "ConfidenceThreshold": 85
      },
      "architecture": {
        "AgentName": "Architect-Master-Gamma",
        "Specialty": "Software Architecture Strategist",
        "AgentPersona": "A visionary architect skilled in designing robust, maintainable, and scalable systems aligned with business goals.",
        "ConfidenceThreshold": 75
      }
    },
    "AgentPromptTemplates": {
      "security": {
        "AnalysisPrompt": "As {agentPersona}, analyze the following code for security vulnerabilities.\n\nCode to analyze:\n{code}\n\nLanguage: {language}\nCompliance standards: {complianceStandards}\nBusiness context: {businessContext}\n\n{languageSpecificSemanticInstructions}\n\nRespond ONLY with valid JSON in this exact structure (no markdown, no explanation):\n{\n  \"findings\": [\n    {\n      \"category\": \"SQL Injection\" | \"Hardcoded Credentials\" | \"Weak Encryption\" | \"Authentication\" | \"Authorization\" | \"Data Exposure\",\n      \"description\": \"Detailed description of the vulnerability\",\n      \"severity\": \"CRITICAL\" | \"HIGH\" | \"MEDIUM\" | \"LOW\",\n      \"location\": \"Specific file, class, method, or line number\",\n      \"evidence\": [\"Exact code snippet showing the issue\"],\n      \"explainability\": {\n        \"confidenceScore\": <number 0-100: overall confidence in this finding>,\n        \"reasoningChain\": [\n          {\n            \"stepNumber\": 1,\n            \"description\": \"Step-by-step reasoning explaining how you arrived at this finding\",\n            \"evidence\": \"Specific evidence examined in this step\",\n            \"conclusion\": \"Conclusion drawn from this step\"\n          }\n        ],\n        \"confidenceBreakdown\": {\n          \"evidenceClarity\": <number 0-100: how clear and unambiguous the evidence is>,\n          \"patternMatch\": <number 0-100: how well this matches known vulnerability patterns>,\n          \"contextUnderstanding\": <number 0-100: how well you understand the code context>,\n          \"consistency\": <number 0-100: how consistent this finding is with other findings>\n        },\n        \"supportingEvidence\": [\n          {\n            \"type\": \"CodeSnippet\" | \"Pattern\" | \"Metric\" | \"Context\",\n            \"description\": \"Description of supporting evidence\",\n            \"location\": \"Where this evidence is found\",\n            \"lineNumber\": <number>,\n            \"codeSnippet\": \"Relevant code snippet\",\n            \"strength\": <number 0-100: how strong this evidence is>\n          }\n        ],\n        \"contradictoryEvidence\": [\n          {\n            \"type\": \"CodeSnippet\" | \"Pattern\" | \"Metric\" | \"Context\",\n            \"description\": \"Description of contradictory evidence\",\n            \"location\": \"Where this evidence is found\",\n            \"lineNumber\": <number>,\n            \"codeSnippet\": \"Relevant code snippet\",\n            \"strength\": <number 0-100: how strong this contradictory evidence is>\n          }\n        ]\n      }\n    }\n  ],\n  \"recommendations\": [\n    {\n      \"title\": \"Short actionable title\",\n      \"description\": \"What needs to be done\",\n      \"implementation\": \"How to implement the fix\",\n      \"priority\": \"CRITICAL\" | \"HIGH\" | \"MEDIUM\" | \"LOW\",\n      \"estimatedHours\": <number: estimate hours to implement based on complexity>\n    }\n  ],\n  \"businessImpact\": \"Business-focused explanation of security risks and compliance impact\",\n  \"confidenceScore\": <number 0-100: your confidence in this analysis>\n}\n\nIMPORTANT:\n- Analyze the ACTUAL code provided above\n- For EACH finding, provide a step-by-step reasoningChain showing your thought process\n- Calculate confidenceBreakdown: evidenceClarity (how clear the code evidence is), patternMatch (how well it matches known patterns), contextUnderstanding (how well you understand the context), consistency (how consistent with other findings)\n- Include supportingEvidence that strengthens your finding and contradictoryEvidence that weakens it\n- Calculate estimatedHours based on complexity: Simple fixes (4-8h), Moderate (8-24h), Complex (24-80h)\n- Set confidenceScore based on code clarity and analysis certainty (60-100)\n- Be specific about vulnerabilities found\n- Include method/class names in location field\n- Evidence should be actual code snippets from input\n- Return ONLY the JSON, no other text",
        "PeerReviewPrompt": "As {agentPersona}, review the peer's analysis:\nPeer Analysis: {peerAnalysis}\nOriginal Code: {originalCode}\nFocus on: {reviewFocus}\nProvide constructive feedback and identify overlooked security issues.",
        "DefaultResponse": "Security analysis could not be completed. Please review the input and try again."
      },
      "performance": {
        "AnalysisPrompt": "As {agentPersona}, analyze the following code for performance issues.\n\nCode to analyze:\n{code}\n\nCompliance standards: {complianceStandards}\nBusiness context: {businessContext}\n\nRespond ONLY with valid JSON in this exact structure (no markdown, no explanation):\n{\n  \"findings\": [\n    {\n      \"category\": \"Database Performance\" | \"Memory Usage\" | \"Algorithm Complexity\" | \"N+1 Queries\" | \"Inefficient Loops\" | \"Resource Leaks\",\n      \"description\": \"Detailed description of the performance issue\",\n      \"severity\": \"CRITICAL\" | \"HIGH\" | \"MEDIUM\" | \"LOW\",\n      \"location\": \"Specific file, class, method, or line number\",\n      \"evidence\": [\"Exact code snippet showing the issue\"],\n      \"explainability\": {\n        \"confidenceScore\": <number 0-100: overall confidence in this finding>,\n        \"reasoningChain\": [\n          {\n            \"stepNumber\": 1,\n            \"description\": \"Step-by-step reasoning explaining how you identified this performance issue\",\n            \"evidence\": \"Specific evidence examined in this step\",\n            \"conclusion\": \"Conclusion drawn from this step\"\n          }\n        ],\n        \"confidenceBreakdown\": {\n          \"evidenceClarity\": <number 0-100: how clear the performance bottleneck evidence is>,\n          \"patternMatch\": <number 0-100: how well this matches known performance anti-patterns>,\n          \"contextUnderstanding\": <number 0-100: how well you understand the performance context>,\n          \"consistency\": <number 0-100: how consistent this finding is with other findings>\n        },\n        \"supportingEvidence\": [\n          {\n            \"type\": \"CodeSnippet\" | \"Pattern\" | \"Metric\" | \"Context\",\n            \"description\": \"Description of supporting evidence\",\n            \"location\": \"Where this evidence is found\",\n            \"lineNumber\": <number>,\n            \"codeSnippet\": \"Relevant code snippet\",\n            \"strength\": <number 0-100: how strong this evidence is>\n          }\n        ],\n        \"contradictoryEvidence\": [\n          {\n            \"type\": \"CodeSnippet\" | \"Pattern\" | \"Metric\" | \"Context\",\n            \"description\": \"Description of contradictory evidence\",\n            \"location\": \"Where this evidence is found\",\n            \"lineNumber\": <number>,\n            \"codeSnippet\": \"Relevant code snippet\",\n            \"strength\": <number 0-100: how strong this contradictory evidence is>\n          }\n        ]\n      }\n    }\n  ],\n  \"recommendations\": [\n    {\n      \"title\": \"Short actionable title\",\n      \"description\": \"What needs to be done\",\n      \"implementation\": \"How to implement the optimization\",\n      \"priority\": \"CRITICAL\" | \"HIGH\" | \"MEDIUM\" | \"LOW\",\n      \"estimatedHours\": <number: estimate hours based on optimization complexity>\n    }\n  ],\n  \"businessImpact\": \"Business-focused explanation of performance impact (response time, scalability, cost)\",\n  \"confidenceScore\": <number 0-100: your confidence in this analysis>\n}\n\nIMPORTANT:\n- Analyze the ACTUAL code provided above\n- For EACH finding, provide a step-by-step reasoningChain showing your thought process\n- Calculate confidenceBreakdown: evidenceClarity (how clear the performance evidence is), patternMatch (how well it matches known anti-patterns), contextUnderstanding (how well you understand the context), consistency (how consistent with other findings)\n- Include supportingEvidence that strengthens your finding and contradictoryEvidence that weakens it\n- Calculate estimatedHours: Quick wins (2-8h), Refactoring (8-24h), Major changes (24-80h)\n- Set confidenceScore based on measurability and certainty (60-100)\n- Identify specific bottlenecks and inefficiencies\n- Include method/class names in location field\n- Evidence should be actual code snippets\n- Return ONLY the JSON, no other text",
        "PeerReviewPrompt": "As {agentPersona}, review the peer's performance analysis:\nPeer Analysis: {peerAnalysis}\nOriginal Code: {originalCode}\nFocus on: {reviewFocus}\nSuggest further optimizations and validate findings.",
        "DefaultResponse": "Performance analysis could not be completed. Please review the input and try again."
      },
      "architecture": {
        "AnalysisPrompt": "As {agentPersona}, analyze the following code for architectural issues.\n\nCode to analyze:\n{code}\n\nCompliance standards: {complianceStandards}\nBusiness context: {businessContext}\n\nRespond ONLY with valid JSON in this exact structure (no markdown, no explanation):\n{\n  \"findings\": [\n    {\n      \"category\": \"SOLID Violations\" | \"Design Patterns\" | \"Separation of Concerns\" | \"Dependency Management\" | \"Code Organization\" | \"Tight Coupling\",\n      \"description\": \"Detailed description of the architectural issue\",\n      \"severity\": \"CRITICAL\" | \"HIGH\" | \"MEDIUM\" | \"LOW\",\n      \"location\": \"Specific file, class, or component\",\n      \"evidence\": [\"Exact code snippet showing the issue\"],\n      \"explainability\": {\n        \"confidenceScore\": <number 0-100: overall confidence in this finding>,\n        \"reasoningChain\": [\n          {\n            \"stepNumber\": 1,\n            \"description\": \"Step-by-step reasoning explaining how you identified this architectural issue\",\n            \"evidence\": \"Specific evidence examined in this step\",\n            \"conclusion\": \"Conclusion drawn from this step\"\n          }\n        ],\n        \"confidenceBreakdown\": {\n          \"evidenceClarity\": <number 0-100: how clear the architectural pattern evidence is>,\n          \"patternMatch\": <number 0-100: how well this matches known architectural patterns/anti-patterns>,\n          \"contextUnderstanding\": <number 0-100: how well you understand the architectural context>,\n          \"consistency\": <number 0-100: how consistent this finding is with other findings>\n        },\n        \"supportingEvidence\": [\n          {\n            \"type\": \"CodeSnippet\" | \"Pattern\" | \"Metric\" | \"Context\",\n            \"description\": \"Description of supporting evidence\",\n            \"location\": \"Where this evidence is found\",\n            \"lineNumber\": <number>,\n            \"codeSnippet\": \"Relevant code snippet\",\n            \"strength\": <number 0-100: how strong this evidence is>\n          }\n        ],\n        \"contradictoryEvidence\": [\n          {\n            \"type\": \"CodeSnippet\" | \"Pattern\" | \"Metric\" | \"Context\",\n            \"description\": \"Description of contradictory evidence\",\n            \"location\": \"Where this evidence is found\",\n            \"lineNumber\": <number>,\n            \"codeSnippet\": \"Relevant code snippet\",\n            \"strength\": <number 0-100: how strong this contradictory evidence is>\n          }\n        ]\n      }\n    }\n  ],\n  \"recommendations\": [\n    {\n      \"title\": \"Short actionable title\",\n      \"description\": \"What needs to be done\",\n      \"implementation\": \"How to implement the improvement\",\n      \"priority\": \"CRITICAL\" | \"HIGH\" | \"MEDIUM\" | \"LOW\",\n      \"estimatedHours\": <number: estimate hours for architectural changes>\n    }\n  ],\n  \"businessImpact\": \"Business-focused explanation of maintainability, scalability, and technical debt impact\",\n  \"confidenceScore\": <number 0-100: your confidence in this analysis>\n}\n\nIMPORTANT:\n- Analyze the ACTUAL code provided above\n- For EACH finding, provide a step-by-step reasoningChain showing your thought process\n- Calculate confidenceBreakdown: evidenceClarity (how clear the architectural evidence is), patternMatch (how well it matches known patterns), contextUnderstanding (how well you understand the context), consistency (how consistent with other findings)\n- Include supportingEvidence that strengthens your finding and contradictoryEvidence that weakens it\n- Calculate estimatedHours: Pattern application (8-16h), Refactoring (16-40h), Restructuring (40-160h)\n- Set confidenceScore based on pattern recognition clarity (60-100)\n- Identify architectural patterns and anti-patterns\n- Include class/component names in location field\n- Evidence should be actual code snippets\n- Return ONLY the JSON, no other text",
        "PeerReviewPrompt": "As {agentPersona}, review the peer's architectural analysis:\nPeer Analysis: {peerAnalysis}\nOriginal Code: {originalCode}\nFocus on: {reviewFocus}\nRecommend improvements and highlight architectural risks.",
        "DefaultResponse": "Architectural analysis could not be completed. Please review the input and try again."
      }
    },
    "OrchestrationPrompts": {
      "CreateAnalysisPlan": "Develop an analysis plan based on the business objective: {businessObjective} and code context: {codeContext}. Outline agent roles and expected outcomes.",
      "FacilitateDiscussion": "Facilitate a discussion on the topic: {topic} using findings: {findings} from agents: {agentNames}. Encourage consensus and address conflicts.",
      "SynthesizeRecommendations": "Synthesize recommendations from analyses: {analyses}, highlighting consensus: {consensus} and conflicts: {conflicts}. Provide actionable next steps.",
      "CreateExecutiveSummary": "Summarize the key findings and recommendations for executive stakeholders in a concise and actionable format.",
      "CreateImplementationStrategy": "Outline a step-by-step implementation strategy based on the synthesized recommendations and business priorities."
    },
    "BusinessImpactRules": {
      "RiskLevelMapping": [
        {
          "pattern": "SQL Injection",
          "riskLevel": "High"
        },
        {
          "pattern": "Hardcoded Credentials",
          "riskLevel": "Critical"
        },
        {
          "pattern": "Inefficient Loop",
          "riskLevel": "Medium"
        }
      ],
      "InvestmentPriorityRules": [
        {
          "condition": "riskLevel == 'Critical'",
          "action": "Immediate remediation required"
        },
        {
          "condition": "riskLevel == 'High'",
          "action": "Prioritize in next sprint"
        },
        {
          "condition": "riskLevel == 'Medium'",
          "action": "Schedule for review"
        }
      ],
      "EffortEstimationFactors": {
        "LowComplexity": 1.0,
        "MediumComplexity": 1.5,
        "HighComplexity": 2.0,
        "LegacyCode": 2.5
      }
    },
    "MaxConnectionsPerServer": 8,
    "HttpTimeoutSeconds": 300
  },
  "BusinessCalculationRules": {
    "CostCalculation": {
      "BaseValuePerLine": 0.1,
      "MaxEstimatedValue": 1000000,
      "DefaultDeveloperHourlyRate": 125,
      "ComplexityMultiplierBase": 0.5
    },
    "ComplexityThresholds": {
      "VeryLow": 20,
      "Low": 30,
      "Medium": 50,
      "High": 60,
      "VeryHigh": 70
    },
    "RiskThresholds": {
      "LowRiskMax": 30,
      "MediumRiskMax": 60,
      "HighRiskMin": 60
    },
    "TimelineEstimation": {
      "VeryLow": "2-4 weeks",
      "Low": "4-8 weeks",
      "Medium": "8-12 weeks",
      "High": "12+ weeks"
    },
    "ProjectSizeClassification": {
      "Small": { "MaxFiles": 5, "MaxClasses": 10, "Label": "Small Project" },
      "Medium": { "MaxFiles": 15, "MaxClasses": 25, "Label": "Medium Project" },
      "Large": { "MaxFiles": 30, "MaxClasses": 50, "Label": "Large Project" },
      "Enterprise": { "Label": "Enterprise Project" }
    },
    "AgentWeighting": {
      "SecurityWeight": 1.2,
      "PerformanceWeight": 1.1,
      "ArchitectureWeight": 1.3,
      "DefaultWeight": 1
    },
    "ProcessingLimits": {
      "MetadataSampleFileCount": 20,
      "CodeContextSummaryMaxLength": 800,
      "TokenEstimationCharsPerToken": 4
    },
    "ArchitecturalDebt": {
      "PoorSeparationOfConcernsDebt": 30,
      "BasicSeparationOfConcernsDebt": 15,
      "MonolithicArchitectureDebt": 20,
      "NoDesignPatternsDebt": 25,
      "NoTestingDebt": 25,
      "MaxDebtScore": 100
    },
    "ComplianceCost": {
      "CostAvoidanceByRiskLevel": {
        "HIGH": 15000,
        "MEDIUM": 8000,
        "LOW": 3000,
        "DEFAULT": 1000
      }
    },
    "ManualAnalysis": {
      "HoursPerClass": 2,
      "HoursPerMethod": 0.25,
      "HoursPerDependency": 0.5,
      "AIAnalysisTimeMinutes": 3,
      "AIAnalysisCostPerAssessment": 5
    },
    "AnalysisLimits": {
      "FolderComplexity": {
        "FileCountMultiplier": 5,
        "FileCountThreshold": 10,
        "AdditionalComplexityWhenThresholdExceeded": 20,
        "MaxComplexityScore": 100
      },
      "ArchitecturalAssessment": {
        "ExcellentSeparationLayerCount": 4,
        "GoodSeparationLayerCount": 3,
        "BasicSeparationLayerCount": 2,
        "GoodTestCoverageFolderCount": 2
      },
      "InvestmentPriorityFallback": {
        "HighRiskHighValueThreshold": 100000,
        "MediumRiskHighValueThreshold": 50000
      },
      "ResultLimits": {
        "MaxFoldersToAnalyze": 10,
        "MaxKeyClassesPerFolder": 5,
        "MaxNextSteps": 6,
        "MaxFilesForSingleAgentAnalysis": 10,
        "MaxFilesForMultiAgentAnalysis": 10,
        "DefaultComplexityScore": 50
      },
      "BusinessMetrics": {
        "BaseHoursPerMethod": 0.5,
        "ComplexityMultiplierBase": 0.5
      }
    }
  },
  "AgentAnalysisConfiguration": {
    "Security": {
      "ConfidenceScoreMultiplier": 20,
      "MinAnalysisLengthForConfidence": 500,
      "EffortEstimationByComplexity": {
        "0": 8,
        "1": 16,
        "2": 40,
        "3": 80
      },
      "RiskLevelByFactorCount": {
        "0": "LOW",
        "1": "MEDIUM",
        "2": "HIGH",
        "3": "CRITICAL"
      },
      "MaxEvidenceItems": 3
    },
    "Performance": {
      "ConfidenceScoreMultiplier": 16,
      "MinAnalysisLengthForConfidence": 600,
      "EffortEstimationByComplexity": {
        "0": 4,
        "1": 12,
        "2": 24,
        "3": 40,
        "4": 80
      }
    },
    "Architecture": {
      "ConfidenceScoreMultiplier": 14,
      "MinAnalysisLengthForConfidence": 800,
      "EffortEstimationByComplexity": {
        "1": 16,
        "2": 40,
        "3": 80,
        "4": 160,
        "5": 320
      }
    }
  },
  "Analysis": {
    "MaxFilesPerProject": 50,
    "MaxFileSizeBytes": 10485760,
    "SupportedFileExtensions": [ ".cs", ".vb", ".fs", ".cpp", ".h" ],
    "EnableDetailedLogging": true,
    "CacheAnalysisResults": false
  },
  "Security": {
    "EnableRateLimiting": true,
    "MaxRequestsPerMinute": 10,
    "RequireAuthentication": false,
    "AllowedOrigins": [ "https://localhost:7001" ]
  },
  "RateLimit": {
    "Enabled": true,
    "MaxRequestsPerMinute": 10,
    "WindowSizeSeconds": 60,
    "MaxRequestsPerWindow": 10,
    "QueueRequestsWhenExceeded": false,
    "MaxQueueWaitSeconds": 30,
    "ExcludedPaths": [ "/health", "/_blazor", "/css", "/js", "/favicon.ico", "/_framework" ],
    "RateLimitExceededStatusCode": 429,
    "RateLimitExceededMessage": "Rate limit exceeded. Please try again later."
  },
  "LogSanitization": {
    "Enabled": true,
    "MaxCodeSnippetLength": 100,
    "RedactionPatterns": [
      "(api[_-]?key|apikey)\\s*[:=]\\s*[\"']?([a-zA-Z0-9\\-_]{20,})[\"']?",
      "(password|pwd|pass)\\s*[:=]\\s*[\"']?([^\"'\\s]{3,})[\"']?",
      "(token|secret|secretkey)\\s*[:=]\\s*[\"']?([a-zA-Z0-9\\-_]{20,})[\"']?",
      "(connectionstring|connstr)\\s*[:=]\\s*[\"']?([^\"']{20,})[\"']?",
      "(authorization|bearer)\\s+([a-zA-Z0-9\\-_\\.]{20,})",
      "(x-api-key|x-auth-token)\\s*[:=]\\s*[\"']?([a-zA-Z0-9\\-_]{20,})[\"']?"
    ],
    "RedactionReplacement": "[REDACTED]",
    "RedactFileContents": true,
    "RedactCodeSnippets": true,
    "RedactStackTrace": false,
    "MaxLogMessageLength": 5000,
    "ForbiddenFields": [ "code", "codeContent", "fileContent", "fullCode", "sourceCode", "apiKey", "password", "token", "secret", "connectionString" ]
  },
  "InputValidation": {
    "Enabled": true,
    "MaxBusinessObjectiveLength": 2000,
    "MaxCustomObjectiveLength": 5000,
    "ForbiddenCharacters": [ "\\u0000", "\\r", "\\n" ],
    "PromptInjectionPatterns": [
      "ignore\\s+(previous|above|all)\\s+instructions",
      "forget\\s+(everything|all|previous)",
      "you\\s+are\\s+now",
      "system\\s*[:=]\\s*",
      "assistant\\s*[:=]\\s*",
      "user\\s*[:=]\\s*",
      "<\\|(system|user|assistant)\\|>",
      "\\[INST\\]",
      "\\[/INST\\]"
    ],
    "MaxFileSizeBytes": 10485760,
    "MaxFilesPerAnalysis": 50,
    "AllowedFileExtensions": [ ".cs", ".py", ".js", ".ts", ".java", ".go", ".vb", ".fs", ".cpp", ".h" ],
    "ValidateFileSignatures": false,
    "ScanForSuspiciousPatterns": true,
    "SuspiciousPatterns": [
      "eval\\s*\\(",
      "exec\\s*\\(",
      "system\\s*\\(",
      "shell_exec\\s*\\(",
      "base64_decode\\s*\\(",
      "gzinflate\\s*\\(",
      "str_rot13\\s*\\(",
      "<script[^>]*>",
      "javascript:",
      "onerror\\s*=",
      "onload\\s*="
    ],
    "MaxFileNameLength": 255,
    "ForbiddenFileNameCharacters": [ "<", ">", ":", "\"", "/", "\\\\", "|", "?", "*", "\\u0000" ]
  },
  "ErrorHandling": {
    "Enabled": true,
    "MinSuccessfulAgentsForPartialSuccess": 2,
    "ReturnPartialResults": true,
    "AllowAgentRetry": true,
    "MaxAgentRetryAttempts": 2,
    "EnableGracefulDegradation": true,
    "IncludeRemediationSteps": true,
    "IncludeErrorCodes": true
  },
  "RequestDeduplication": {
    "Enabled": true,
    "CacheExpirationSeconds": 300,
    "MaxCacheSize": 1000,
    "IncludeFileContentHash": true,
    "IncludeBusinessObjective": true,
    "IncludeAgentSelection": true
  },
  "CostTracking": {
    "Enabled": true,
    "InputTokenCostPer1K": 0.03,
    "OutputTokenCostPer1K": 0.06,
    "InputTokenCostPer1K_GPT35": 0.0015,
    "OutputTokenCostPer1K_GPT35": 0.002,
    "DefaultModel": "gpt-4",
    "IncludeCostInResults": true,
    "LogCostMetrics": true
  },
  "Tracing": {
    "Enabled": true,
    "ServiceName": "LegacyAnalyzer-Web",
    "ServiceVersion": "1.0.0",
    "IncludeCorrelationIdInLogs": true,
    "CreateAgentSpans": true,
    "CreatePreprocessingSpans": true
  },
  "TokenEstimation": {
    "UseTiktoken": true,
    "CodeStructureOverheadPercentage": 0.1,
    "BaseBatchPromptOverhead": 400,
    "BatchJsonStructureOverhead": 200,
    "PerFileBatchOverhead": 80
  },
  "FeatureFlags": {
    "EnableMultiAgentAnalysis": true,
    "EnableArchitecturalAnalysis": true,
    "EnableBusinessImpactAnalysis": true,
    "EnableReportDownload": true
  },
  "FileAnalysisLimits": {
    "MaxFileSizeBytes": 512000,
    "MaxFilesPerAnalysis": 10,
    "MaxRecommendations": 6,
    "DefaultCodePreviewLength": 800,
    "MinCodePreviewLength": 400,
    "BatchSizeThresholdForPreviewReduction": 3,
    "BatchPreviewLengthDivisor": 2,
    "MaxTopClassesToDisplay": 3,
    "MinAnalysisWordCount": 200,
    "MaxAnalysisWordCount": 500
  },
  "ComplexityThresholds": {
    "Low": 30,
    "Medium": 50,
    "High": 60,
    "VeryHigh": 70,
    "Critical": 40
  },
  "ScaleThresholds": {
    "LargeCodebaseFileCount": 25,
    "HighMethodsPerClass": 8,
    "HighRiskComplexityScore": 60
  },
  "FilePreProcessing": {
    "MaxConcurrentFiles": 5,
    "CacheTTLMinutes": 60,
    "MaxCacheSize": 1000,
    "MinComplexityThreshold": 15,
    "EnablePatternDetection": true,
    "EnableCaching": true,
    "MaxFileSizeMB": 10,
    "PatternDetection": {
      "EnableSecurityPatterns": true,
      "EnablePerformancePatterns": true,
      "EnableArchitecturePatterns": true
    },
    "Performance": {
      "LogDetailedMetrics": false,
      "EnableBenchmarking": false
    }
  },
  "DefaultValues": {
    "Language": {
      "Default": "csharp",
      "Unknown": "unknown"
    },
    "Status": {
      "Success": "Success",
      "Error": "Error",
      "Initializing": "Initializing",
      "PreparingData": "Preparing data",
      "FilteringMetadata": "Filtering metadata",
      "AnalyzingCode": "Analyzing code",
      "ProcessingAIResponse": "Processing AI response",
      "Complete": "Complete",
      "AnalysisFailed": "Analysis Failed",
      "AnalysisCompleted": "Analysis Completed",
      "AnalysisCompletedFallback": "Analysis Completed (Fallback)",
      "AnalysisCompletedIndividualFallback": "Analysis Completed (Individual Fallback)",
      "AnalysisInProgress": "Agent analysis in progress",
      "ExtractingMetadata": "Extracting metadata and performing static analysis (no API calls)...",
      "AnalyzingProjectStructure": "Analyzing project structure and dependencies",
      "AnalyzingArchitecturalOrganization": "Analyzing architectural organization",
      "EvaluatingSystemArchitecture": "Evaluating system architecture patterns",
      "CalculatingBusinessValue": "Calculating business value and risk assessment",
      "CreatingExecutiveSummary": "Creating executive summary and recommendations",
      "AnalysisCompletedGeneratingInsights": "Analysis completed - generating insights...",
      "AnalyzedBySingleAgent": "Analyzed by Single Agent"
    },
    "Severity": {
      "Critical": "Critical",
      "High": "High",
      "Medium": "Medium",
      "Low": "Low"
    },
    "Category": {
      "Error": "Error",
      "Warning": "Warning",
      "Info": "Info"
    },
    "TokenUsage": {
      "DefaultProvider": "semantic-kernel",
      "DefaultModel": "unknown"
    },
    "FileNames": {
      "Unknown": "Unknown",
      "UnknownFile": "unknown"
    }
  },
  "LegacyContextMessages": {
    "VeryOldCode": "‚ö†Ô∏è Very Old Code: This file is approximately {years} years old. Consider legacy patterns, outdated practices, and accumulated technical debt.",
    "AncientFramework": "üèõÔ∏è Ancient .NET Framework{frameworkInfo}: This code uses an outdated framework version. Be aware of deprecated APIs, security vulnerabilities in older frameworks, and migration challenges.",
    "GlobalStateDetected": "üåê Global State Detected: This codebase uses global/static state patterns. This creates tight coupling, makes testing difficult, and can cause thread-safety issues. Consider dependency injection alternatives.",
    "LegacyDataAccess": "üìä Legacy Data Access: This code uses older data access patterns (e.g., DataSet, DataTable, ADO.NET). Modern alternatives include Entity Framework Core, Dapper, or repository patterns.",
    "ObsoleteApis": "üî¥ Obsolete APIs: This code uses deprecated or obsolete APIs that may be removed in future framework versions. Prioritize migration to modern alternatives.",
    "ChangeFrequencyNone": "üìÖ Change Frequency: This file has not been modified recently (0 changes in last year). It may be stable but could also indicate dead code or low maintenance priority.",
    "ChangeFrequencyLow": "üìÖ Change Frequency: Low change frequency ({count} changes/year). This is relatively stable code, but may indicate low priority or technical debt accumulation.",
    "ChangeFrequencyHigh": "üìÖ Change Frequency: High change frequency ({count} changes/year). This file is actively maintained but may indicate instability or frequent bug fixes.",
    "LegacyContextHeader": "\n\nLEGACY CODE CONTEXT:\n",
    "LegacyContextFooter": "\n\nWhen analyzing this code, pay special attention to:\n- Legacy anti-patterns and technical debt\n- Migration paths to modern frameworks and APIs\n- Security vulnerabilities common in older codebases\n- Performance issues from outdated patterns\n- Maintainability concerns from accumulated technical debt",
    "LegacyCodebaseContextHeader": "\n\nLEGACY CODEBASE CONTEXT:\n",
    "LegacyCodebaseContextFooter": "\n\nThis is a legacy codebase with accumulated technical debt. Prioritize modernization recommendations and migration paths.",
    "VeryOldFilesSummary": "‚ö†Ô∏è {count} file(s) are very old (5+ years)",
    "AncientFrameworkFilesSummary": "üèõÔ∏è {count} file(s) use ancient .NET Framework versions",
    "GlobalStateFilesSummary": "üåê {count} file(s) contain global state patterns",
    "ObsoleteApiFilesSummary": "üî¥ {count} file(s) use obsolete APIs",
    "TotalLegacyIssuesSummary": "üìã Total legacy issues detected: {totalIssues} across {fileCount} files",
    "LegacyContextHeaderSimple": "\n\nLEGACY CODE CONTEXT:\n",
    "SecurityLegacyContextFooter": "\n\nPay special attention to security vulnerabilities common in legacy codebases.",
    "PerformanceLegacyContextFooter": "\n\nPay special attention to performance bottlenecks from legacy patterns.",
    "ArchitectureLegacyContextFooter": "\n\nPay special attention to architectural anti-patterns, technical debt, and modernization opportunities."
  },
  "AgentLegacyIndicators": {
    "Security": {
      "AncientFramework": "üèõÔ∏è Ancient .NET Framework detected",
      "GlobalState": "üåê Global state patterns detected",
      "ObsoleteApis": "üî¥ Obsolete APIs detected"
    },
    "Performance": {
      "LegacyDataAccess": "üìä Legacy data access patterns detected (DataSet/DataTable) - these are memory-intensive and slow",
      "SynchronousIO": "‚ö†Ô∏è Synchronous I/O patterns detected - these block threads and hurt scalability",
      "LegacyWebForms": "üèõÔ∏è Legacy ASP.NET WebForms patterns detected - ViewState can cause performance issues"
    },
    "Architecture": {
      "AncientFramework": "üèõÔ∏è Ancient .NET Framework detected",
      "GlobalState": "üåê Global state patterns detected",
      "GodObjects": "‚ö†Ô∏è Large number of classes detected - potential God Objects"
    }
  },
  "PromptTemplates": {
    "BatchAnalysisPrompt": "Analyze {fileCount} source files for {analysisType} assessment. Provide comprehensive analysis for EACH file.\n\n{fileSections}\n\nReturn ONLY valid JSON (no markdown, no explanations):\n{{\n  \"analyses\": [\n    {{\"fileName\": \"File1.cs\", \"assessment\": \"{minWords}-{maxWords} word analysis covering all {analysisType} aspects\"}},\n    {{\"fileName\": \"File2.cs\", \"assessment\": \"{minWords}-{maxWords} word analysis covering all {analysisType} aspects\"}}\n  ]\n}}\n\nRequirements:\n- Every file must have exactly one entry\n- Assessments must be comprehensive ({minWords}-{maxWords} words)\n- Focus on {analysisType}-specific insights\n- Include actionable recommendations",
    "BatchSystemPromptSuffix": "\n\nCRITICAL: You MUST return ONLY valid JSON. No markdown, no explanations, just JSON.\nRequired JSON structure:\n{{\n  \"analyses\": [\n    {{\"fileName\": \"File1.cs\", \"assessment\": \"Your detailed analysis here...\"}},\n    {{\"fileName\": \"File2.cs\", \"assessment\": \"Your detailed analysis here...\"}}\n  ]\n}}\nEvery file in the input MUST have exactly one entry in the analyses array. The assessment should be comprehensive (200-500 words) covering all aspects of the analysis type.",
    "DefaultSystemPrompt": "You are a senior software architect providing comprehensive code analysis.",
    "FileSectionTemplate": "FILE {index}: {fileName}\nMetrics: {classCount} classes, {methodCount} methods, {propertyCount} properties\nTop Classes: {topClasses}\nCode:\n{codePreview}"
  },
  "AgentCache": {
    "Enabled": true,
    "CacheExpirationMinutes": 60,
    "UseSlidingExpiration": true,
    "SlidingExpirationMinutes": 30,
    "MaxCacheSize": 1000
  }
}
